name: CI/CD Pipeline

on:
  workflow_dispatch:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  test:
    name: Test Suite
    runs-on: self-hosted
    timeout-minutes: 15
    
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
      
      - name: Verify Runner
        run: |
          echo "âœ… Runner: ${{ runner.name }}"
          echo "âœ… OS: ${{ runner.os }}"
          echo "âœ… Working Directory: $(pwd)"
      
      - name: Run Tests
        run: |
          echo "ğŸ§ª Running test suite..."
          make test
      
      - name: Code Quality Checks
        run: |
          echo "ğŸ” Running lint checks..."
          make lint
          
      - name: Type Checking
        run: |
          echo "ğŸ”§ Running type checks..."
          make typecheck
      
      - name: Summary
        run: |
          echo "âœ… All checks passed!"
          echo "ğŸ“Š Test suite: âœ“"
          echo "ğŸ“Š Lint checks: âœ“" 
          echo "ğŸ“Š Type checks: âœ“"