name: Test Self-Hosted Runner

on:
  workflow_dispatch:
  push:
    branches: [test-runner]

jobs:
  test-runner:
    runs-on: [self-hosted, docker]
    steps:
      - name: Check out code
        uses: actions/checkout@v4
        
      - name: Runner info
        run: |
          echo "ðŸŽ¯ Testing self-hosted runner"
          echo "Runner name: ${{ runner.name }}"
          echo "Runner OS: ${{ runner.os }}"
          echo "Runner Arch: ${{ runner.arch }}"
          
      - name: System info
        run: |
          echo "=== System Information ==="
          uname -a
          echo ""
          echo "=== CPU Info ==="
          grep "model name" /proc/cpuinfo | head -1 || echo "CPU info not available"
          echo ""
          echo "=== Memory ==="
          free -h 2>/dev/null || echo "Memory info not available"
          echo ""
          echo "=== Disk Space ==="
          df -h /
          
      - name: Docker test
        run: |
          echo "=== Docker Version ==="
          docker --version
          echo ""
          echo "=== Docker Info ==="
          docker info --format "Containers: {{.Containers}}, Images: {{.Images}}"
          
      - name: Python test
        run: |
          echo "=== Python Check ==="
          python3 --version || echo "Python3 not installed"
          pip3 --version || echo "Pip3 not installed"
          
      - name: Node test  
        run: |
          echo "=== Node Check ==="
          node --version || echo "Node not installed"
          npm --version || echo "NPM not installed"
          
      - name: Success
        run: |
          echo "âœ… Self-hosted runner is working perfectly!"
          echo "Ready for CI/CD workloads"