{
  "version": "1.0.0",
  "enabled": true,
  "description": "Self-healing workflow hooks configuration for automatic error recovery and agent coordination",
  "hooks": {
    "fallback": {
      "enabled": true,
      "description": "Automatic error recovery hooks",
      "triggers": [
        "command_error",
        "file_not_found",
        "permission_denied",
        "timeout_exceeded",
        "resource_exhausted",
        "dependency_missing"
      ],
      "actions": [
        "retry_with_backoff",
        "fallback_command",
        "cleanup_resources",
        "notify_admin",
        "log_incident"
      ],
      "config": {
        "maxRetries": 3,
        "backoffMultiplier": 2,
        "initialDelay": 1000,
        "maxDelay": 30000,
        "retryableErrors": [1, 2, 126, 127, 130]
      },
      "recovery_strategies": {
        "npm_errors": {
          "clear_cache": "npm cache clean --force",
          "reinstall": "rm -rf node_modules && npm install",
          "use_yarn": "yarn install"
        },
        "git_errors": {
          "reset_hard": "git reset --hard HEAD",
          "clean_untracked": "git clean -fd",
          "fetch_origin": "git fetch origin"
        },
        "file_system": {
          "create_directories": "mkdir -p",
          "fix_permissions": "chmod 755",
          "create_backup": "cp -r"
        }
      }
    },
    "postBash": {
      "enabled": true,
      "description": "Monitor command execution and handle failures",
      "monitoring": [
        "exit_code",
        "stderr_output",
        "execution_time",
        "memory_usage",
        "cpu_usage",
        "file_changes"
      ],
      "triggers": {
        "exit_code_non_zero": {
          "action": "error_recovery",
          "threshold": 0,
          "handler": "fallback_recovery"
        },
        "execution_timeout": {
          "action": "process_cleanup",
          "threshold": 300,
          "handler": "timeout_handler"
        },
        "high_memory_usage": {
          "action": "resource_optimization",
          "threshold": "80%",
          "handler": "memory_cleanup"
        },
        "stderr_patterns": {
          "action": "pattern_analysis",
          "patterns": [
            "Error:",
            "FATAL:",
            "Permission denied",
            "No such file",
            "Command not found"
          ],
          "handler": "error_pattern_handler"
        }
      },
      "response_actions": {
        "log_metrics": true,
        "store_in_memory": true,
        "notify_on_failure": true,
        "attempt_recovery": true
      }
    },
    "preTask": {
      "enabled": true,
      "description": "Prepare environment before task execution",
      "preparation": [
        "validate_environment",
        "check_dependencies",
        "prepare_workspace",
        "restore_context",
        "verify_permissions",
        "check_disk_space"
      ],
      "resourceChecks": {
        "memory": {
          "threshold": "80%",
          "action": "cleanup_temp_files",
          "warning_threshold": "70%"
        },
        "disk": {
          "threshold": "90%",
          "action": "archive_old_logs",
          "warning_threshold": "85%"
        },
        "processes": {
          "maxCount": 50,
          "action": "consolidate_processes",
          "warning_threshold": 40
        },
        "network": {
          "check_connectivity": true,
          "required_hosts": ["github.com", "npmjs.com"],
          "timeout": 5000
        }
      },
      "environment_validation": {
        "required_tools": ["node", "npm", "git"],
        "optional_tools": ["yarn", "docker"],
        "env_variables": ["HOME", "PATH"],
        "config_files": ["package.json", ".gitignore"]
      },
      "workspace_setup": {
        "directories": ["logs", "tmp", "cache", "backup"],
        "permissions": "755",
        "cleanup_old": true,
        "retention_days": 7
      }
    },
    "postEdit": {
      "enabled": true,
      "description": "Track file changes and validate modifications",
      "tracking": [
        "file_changes",
        "syntax_validation",
        "dependency_analysis",
        "security_scan",
        "performance_impact",
        "code_quality"
      ],
      "validation": {
        "syntax_check": {
          "javascript": "node -c",
          "typescript": "tsc --noEmit",
          "json": "jq empty",
          "yaml": "yamllint"
        },
        "security_patterns": [
          "password",
          "secret",
          "token",
          "api[_-]?key",
          "private[_-]?key",
          "auth[_-]?token"
        ],
        "quality_metrics": {
          "line_length": 120,
          "complexity_threshold": 10,
          "duplication_threshold": 5
        }
      },
      "actions": {
        "syntax_error": {
          "handler": "auto_fix_syntax",
          "fallback": "flag_for_manual_review"
        },
        "dependency_missing": {
          "handler": "install_dependencies",
          "auto_install": true
        },
        "security_issue": {
          "handler": "flag_for_security_review",
          "severity_levels": ["low", "medium", "high", "critical"]
        },
        "performance_regression": {
          "handler": "performance_analysis",
          "benchmark": true
        }
      },
      "auto_fixes": {
        "format_code": true,
        "fix_imports": true,
        "remove_unused": true,
        "update_dependencies": false
      }
    },
    "sessionManagement": {
      "enabled": true,
      "description": "Manage session context and state persistence",
      "persistence": {
        "context": {
          "enabled": true,
          "storage": "memory",
          "encryption": false
        },
        "memory": {
          "enabled": true,
          "compression": true,
          "ttl": "24h"
        },
        "state": {
          "enabled": true,
          "snapshots": true,
          "incremental": true
        },
        "metrics": {
          "enabled": true,
          "aggregation": "hourly",
          "retention": "30d"
        }
      },
      "cleanup": {
        "staleThreshold": "24h",
        "autoArchive": true,
        "compressionEnabled": true,
        "retentionPolicy": {
          "active_sessions": "7d",
          "archived_sessions": "30d",
          "error_logs": "14d",
          "performance_metrics": "90d"
        }
      },
      "restoration": {
        "auto_restore": true,
        "restore_timeout": 30000,
        "partial_restore": true,
        "validation": true
      },
      "synchronization": {
        "cross_session": true,
        "conflict_resolution": "timestamp_based",
        "merge_strategy": "last_writer_wins"
      }
    },
    "notifications": {
      "enabled": true,
      "description": "Handle recovery status and system notifications",
      "channels": [
        "memory",
        "log_file",
        "console",
        "webhook"
      ],
      "levels": {
        "error": {
          "color": "red",
          "icon": "❌",
          "priority": "high",
          "notify_admin": true
        },
        "warning": {
          "color": "yellow",
          "icon": "⚠️",
          "priority": "medium",
          "notify_admin": false
        },
        "info": {
          "color": "blue",
          "icon": "ℹ️",
          "priority": "low",
          "notify_admin": false
        },
        "success": {
          "color": "green",
          "icon": "✅",
          "priority": "low",
          "notify_admin": false
        }
      },
      "recovery": {
        "onSuccess": {
          "actions": ["log_recovery_metrics", "update_success_rate", "notify_completion"],
          "store_metrics": true
        },
        "onFailure": {
          "actions": ["escalate_to_admin", "log_failure_details", "trigger_fallback"],
          "max_escalations": 3
        },
        "onRetry": {
          "actions": ["update_retry_counter", "log_retry_attempt", "adjust_backoff"],
          "track_patterns": true
        }
      },
      "filtering": {
        "rate_limiting": {
          "enabled": true,
          "max_per_minute": 10,
          "burst_threshold": 5
        },
        "deduplication": {
          "enabled": true,
          "time_window": "5m",
          "similarity_threshold": 0.8
        }
      },
      "formatting": {
        "timestamp": "ISO8601",
        "include_context": true,
        "max_message_length": 500,
        "truncate_long_messages": true
      }
    }
  },
  "coordination": {
    "description": "Agent coordination and synchronization settings",
    "agentSynchronization": {
      "enabled": true,
      "heartbeat_interval": 30000,
      "timeout": 120000,
      "max_drift": 5000
    },
    "memorySharing": {
      "enabled": true,
      "namespace_isolation": true,
      "conflict_resolution": "last_writer_wins",
      "backup_frequency": "5m"
    },
    "taskDistribution": {
      "load_balancing": true,
      "priority_scheduling": true,
      "resource_awareness": true,
      "fault_tolerance": true
    },
    "communication": {
      "protocol": "memory_based",
      "encryption": false,
      "compression": true,
      "message_ordering": true
    }
  },
  "logging": {
    "description": "Logging configuration for hook execution",
    "level": "info",
    "levels": ["debug", "info", "warn", "error"],
    "retention": {
      "days": 7,
      "max_size": "100MB",
      "compress_old": true
    },
    "format": "json",
    "include": {
      "timestamp": true,
      "level": true,
      "message": true,
      "context": true,
      "stackTrace": true,
      "hookName": true,
      "executionTime": true
    },
    "outputs": [
      {
        "type": "file",
        "path": "logs/hooks.log",
        "level": "info"
      },
      {
        "type": "file",
        "path": "logs/errors.log",
        "level": "error"
      },
      {
        "type": "console",
        "level": "warn",
        "colors": true
      }
    ],
    "rotation": {
      "enabled": true,
      "max_files": 10,
      "max_size": "10MB"
    }
  },
  "performance": {
    "description": "Performance monitoring and optimization",
    "monitoring": {
      "hook_execution_time": true,
      "memory_usage": true,
      "cpu_usage": false,
      "io_operations": true
    },
    "optimization": {
      "parallel_execution": true,
      "caching": {
        "enabled": true,
        "ttl": "1h",
        "max_size": "50MB"
      },
      "lazy_loading": true,
      "batch_operations": true
    },
    "thresholds": {
      "max_hook_execution_time": 30000,
      "max_memory_usage": "100MB",
      "max_concurrent_hooks": 10
    }
  },
  "security": {
    "description": "Security settings for hook execution",
    "sandbox": {
      "enabled": false,
      "allowed_commands": ["npm", "node", "git"],
      "forbidden_paths": ["/etc", "/root", "/usr/bin"],
      "max_execution_time": 300
    },
    "validation": {
      "input_sanitization": true,
      "path_validation": true,
      "command_whitelisting": false
    },
    "audit": {
      "log_all_executions": true,
      "include_arguments": true,
      "retention": "30d"
    }
  },
  "metadata": {
    "created": "2025-01-26T00:00:00.000Z",
    "version": "1.0.0",
    "author": "Hook Configuration System",
    "description": "Comprehensive hook configuration for self-healing workflows",
    "license": "MIT"
  }
}