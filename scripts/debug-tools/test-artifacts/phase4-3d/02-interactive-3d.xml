<artifact type="application/vnd.ant.react" title="Interactive 3D with Animations">
import { Canvas } from '@react-three/fiber';
import { OrbitControls, Box, Sphere, Text } from '@react-three/drei';
import { useSpring, animated } from '@react-spring/three';
import { useState, useRef } from 'react';
import * as THREE from 'three';

function InteractiveShape({ position, color, children }: { position: [number, number, number]; color: string; children: string }) {
  const [hovered, setHovered] = useState(false);
  const [clicked, setClicked] = useState(false);
  const meshRef = useRef<THREE.Mesh>(null);

  const { scale } = useSpring({
    scale: clicked ? 1.5 : hovered ? 1.2 : 1,
    config: { mass: 1, tension: 170, friction: 26 }
  });

  return (
    <animated.group position={position} scale={scale as any}>
      <Box
        ref={meshRef}
        args={[1.5, 1.5, 1.5]}
        onClick={() => setClicked(!clicked)}
        onPointerOver={() => setHovered(true)}
        onPointerOut={() => setHovered(false)}
      >
        <meshStandardMaterial
          color={clicked ? '#ff6b6b' : hovered ? '#4ecdc4' : color}
          emissive={clicked ? '#ff6b6b' : hovered ? '#4ecdc4' : color}
          emissiveIntensity={0.2}
          roughness={0.2}
          metalness={0.8}
        />
      </Box>
      <Text
        position={[0, 0, 0.8]}
        fontSize={0.3}
        color="white"
        anchorX="center"
        anchorY="middle"
      >
        {children}
      </Text>
    </animated.group>
  );
}

function AnimatedSphere() {
  const meshRef = useRef<THREE.Mesh>(null);

  useFrame((state) => {
    if (meshRef.current) {
      meshRef.current.position.y = Math.sin(state.clock.elapsedTime) * 2;
      meshRef.current.rotation.x = state.clock.elapsedTime;
      meshRef.current.rotation.y = state.clock.elapsedTime * 0.5;
    }
  });

  return (
    <Sphere ref={meshRef} args={[1, 32, 32]} position={[0, 3, 0]}>
      <meshStandardMaterial
        color="#ffd700"
        emissive="#ffd700"
        emissiveIntensity={0.3}
        roughness={0.1}
        metalness={0.9}
      />
    </Sphere>
  );
}

function Scene() {
  return (
    <>
      <ambientLight intensity={0.4} />
      <directionalLight position={[10, 10, 5]} intensity={1} castShadow />
      <pointLight position={[-10, -10, -10]} intensity={0.5} color="#00ffff" />
      <InteractiveShape position={[-3, 0, 0]} color="#ff6b6b">Click Me!</InteractiveShape>
      <InteractiveShape position={[3, 0, 0]} color="#4ecdc4">Hover Me</InteractiveShape>
      <AnimatedSphere />
      <OrbitControls enablePan={true} enableZoom={true} enableRotate={true} />
      <gridHelper args={[20, 20, 0x444444, 0x222222]} position={[0, -2, 0]} />
    </>
  );
}

export default function Interactive3D() {
  return (
    <div style={{ width: '100%', height: '400px', background: 'linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%)', borderRadius: '8px', position: 'relative' }}>
      <Canvas camera={{ position: [8, 6, 8], fov: 50 }} shadows>
        <Scene />
      </Canvas>
      <div style={{
        position: 'absolute',
        bottom: '20px',
        left: '50%',
        transform: 'translateX(-50%)',
        color: 'white',
        textAlign: 'center',
        fontFamily: 'system-ui, sans-serif'
      }}>
        <p style={{ margin: 0, fontSize: '14px' }}>ðŸŽ® Interactive 3D Scene</p>
        <p style={{ margin: 0, fontSize: '12px', opacity: 0.8 }}>Click and hover shapes â€¢ Drag to rotate view</p>
      </div>
    </div>
  );
}
</artifact>